# üöÄ FastAPI –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üéØ –ß—Ç–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ –∑–∞ 2 —á–∞—Å–∞

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ BookStore API

```
bookstore/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ main.py              # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îú‚îÄ‚îÄ models.py            # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py           # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ database.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ auth.py              # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è JWT
‚îî‚îÄ‚îÄ routers/             # API —Ä–æ—É—Ç–µ—Ä—ã
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ books.py         # CRUD –¥–ª—è –∫–Ω–∏–≥
    ‚îú‚îÄ‚îÄ authors.py       # CRUD –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤
    ‚îú‚îÄ‚îÄ genres.py        # CRUD –¥–ª—è –∂–∞–Ω—Ä–æ–≤
    ‚îú‚îÄ‚îÄ users.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îú‚îÄ‚îÄ reviews.py       # –û—Ç–∑—ã–≤—ã –Ω–∞ –∫–Ω–∏–≥–∏
    ‚îî‚îÄ‚îÄ reading_lists.py # –°–ø–∏—Å–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è
```

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)

**–ú–æ–¥–µ–ª–∏:**
- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏
- **Author** - –∞–≤—Ç–æ—Ä—ã –∫–Ω–∏–≥
- **Genre** - –∂–∞–Ω—Ä—ã
- **Book** - –∫–Ω–∏–≥–∏ (many-to-many —Å –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏)
- **Review** - –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **ReadingList** - —Å–ø–∏—Å–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è
- **ReadingListItem** - —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–æ–≤

**–°–≤—è–∑–∏:**
- –ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º: Book ‚Üî Author, Book ‚Üî Genre
- –û–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º: User ‚Üí Review, User ‚Üí ReadingList
- –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- get_password_hash()     # –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- verify_password()       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
- create_access_token()   # –°–æ–∑–¥–∞–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤
- get_current_user()      # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- get_current_superuser() # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
```

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `POST /auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `GET /auth/me` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### üìä Pydantic —Å—Ö–µ–º—ã

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```python
# –ë–∞–∑–æ–≤—ã–µ —Å—Ö–µ–º—ã
class BookBase(BaseModel):
    title: str = Field(..., min_length=1, max_length=500)
    price: Optional[float] = Field(None, ge=0)

# –°—Ö–µ–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
class BookCreate(BookBase):
    author_ids: List[int] = Field(..., min_items=1)

# –°—Ö–µ–º—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
class BookUpdate(BaseModel):
    title: Optional[str] = Field(None, min_length=1)

# –°—Ö–µ–º—ã –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
class Book(BookBase):
    id: int
    authors: List[Author] = []
    
    class Config:
        from_attributes = True
```

### üåê API Endpoints

#### –ö–Ω–∏–≥–∏ (`/api/v1/books/`)
- `GET /` - —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /{id}` - –¥–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ (–∞–¥–º–∏–Ω)
- `PUT /{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ (–∞–¥–º–∏–Ω)
- `DELETE /{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ (–∞–¥–º–∏–Ω)
- `GET /stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–Ω–∏–≥–∞–º

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/v1/users/`)
- `GET /` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω)
- `GET /me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /{id}` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID
- `POST /` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `PUT /{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `DELETE /{id}` - —É–¥–∞–ª–µ–Ω–∏–µ (–∞–¥–º–∏–Ω)

#### –û—Ç–∑—ã–≤—ã (`/api/v1/reviews/`)
- `GET /` - —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
- `PUT /{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
- `DELETE /{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞

#### –°–ø–∏—Å–∫–∏ —á—Ç–µ–Ω–∏—è (`/api/v1/reading-lists/`)
- `GET /` - –º–æ–∏ —Å–ø–∏—Å–∫–∏
- `GET /public` - –ø—É–±–ª–∏—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏
- `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- `POST /{id}/books` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
- `DELETE /{id}/books/{book_id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏

### üîç –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∫–Ω–∏–≥
GET /api/v1/books/?q=–≤–æ–π–Ω–∞&author=—Ç–æ–ª—Å—Ç–æ–π&min_price=100&max_price=1000
```

#### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
```python
GET /api/v1/books/?page=1&size=20
```

#### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
```python
GET /api/v1/books/?sort_by=price&sort_order=desc
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```python
GET /api/v1/books/stats
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞, –∏ —Ç.–¥.
```

### üìö –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**Swagger UI:** `http://localhost:8000/docs`
**ReDoc:** `http://localhost:8000/redoc`

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT —Ç–æ–∫–µ–Ω—ã** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Bcrypt** –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–æ–±—ã—á–Ω—ã–π/—Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Pydantic
- **CORS middleware** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Eager loading** —Å `joinedload()` –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ò–Ω–¥–µ–∫—Å—ã** –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

## üéì –ò–∑—É—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### FastAPI
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ Dependency Injection —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å Pydantic
- ‚úÖ Middleware –∏ CORS
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã

### SQLAlchemy
- ‚úÖ –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ (One-to-Many, Many-to-Many)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã
- ‚úÖ –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å JOIN
- ‚úÖ Eager loading –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ OAuth2 —Å—Ö–µ–º–∞
- ‚úÖ Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (models, schemas, routers)
- ‚úÖ Dependency Injection
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r fastapi_requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python run_bookstore.py

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
http://localhost:8000/docs
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–î–ª—è production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å:
- ‚úÖ Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (pytest + httpx)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Rate limiting
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- ‚úÖ CI/CD pipeline

**–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —Å–æ–∑–¥–∞–ª —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, production-ready REST API! üéâ**